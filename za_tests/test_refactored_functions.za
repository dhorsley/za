# Test refactored find() and where() functions

println "=== Testing Refactored find() Function ==="

# Test data
arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]

println "Array: ", arr

# Test find() with condition string
println "find(arr, '#>3'):"
result = find(arr, '#>3')
println result
println "Expected: [3, 4, 5, 6, 7, 8]"

# Test find() with complex condition
println "find(arr, '#>2 and #<7'):"
result = find(arr, '#>2 and #<7')
println result
println "Expected: [2, 3, 4, 5, 6]"

# Test find() with index condition
println "find(arr, '$idx>5'):"
result = find(arr, '$idx>5')
println result
println "Expected: [6, 7, 8]"

# Test find() with modulo condition
println "find(arr, '#%2==0'):"
result = find(arr, '#%2==0')
println result
println "Expected: [0, 2, 4, 6, 8]"

println "\n=== Testing Refactored where() Function ==="

# Test where() with condition string
println "where(arr, '#>3'):"
result = where(arr, '#>3')
println result
println "Expected: [4, 5, 6, 7, 8, 9]"

# Test where() with complex condition
println "where(arr, '#>2 and #<7'):"
result = where(arr, '#>2 and #<7')
println result
println "Expected: [3, 4, 5, 6]"

# Test where() with index condition
println "where(arr, '$idx>5'):"
result = where(arr, '$idx>5')
println result
println "Expected: [7, 8, 9]"

# Test where() with modulo condition
println "where(arr, '#%2==0'):"
result = where(arr, '#%2==0')
println result
println "Expected: [2, 4, 6, 8]"

println "\n=== Testing Backward Compatibility ==="

# Test find() with value matching
println "find(arr, 5):"
result = find(arr, 5)
println result
println "Expected: [4]"

# Test find() with no arguments (non-zero)
println "find(arr):"
result = find(arr)
println result
println "Expected: [0, 1, 2, 3, 4, 5, 6, 7, 8]"

# Test where() with condition array
cond = [1, 0, 1, 0, 1, 0, 1, 0, 1]
x = [10, 20, 30, 40, 50, 60, 70, 80, 90]
y = [100, 200, 300, 400, 500, 600, 700, 800, 900]

println "where(cond, x, y):"
result = where(cond, x, y)
println result
println "Expected: [10, 200, 30, 400, 50, 600, 70, 800, 90]"

println "\n=== find() and where() Tests Complete ==="