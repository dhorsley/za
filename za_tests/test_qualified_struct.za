#!/usr/bin/env za

println "Testing fully qualified struct names"

module "./ffi/libtest_struct_array.so" as test_c auto "./ffi/test_struct_array_lib.h"
use +test_c

println "\nTest 1: Fully qualified VAR declaration"
var c test_c::color_t
println "Declared c:", c

println "\nTest 2: Create struct via C function"
c2 = test_c::make_color(255, 128, 64, 200)
println "Created c2.rgb[0]:", c2["rgb"][0], "c2.alpha:", c2["alpha"]

println "\nTest 3: Pass struct to C function"
avg = test_c::get_avg_rgb(c2)
println "Average:", avg

println "\nDone"
