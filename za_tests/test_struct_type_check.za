#!/usr/bin/env za

# Simple test to check if AUTO-imported structs are available as types

println "Testing if AUTO structs are available as types"

module "/home/daniel/go/src/za/za_tests/libtest_struct_array.so" as test_c auto "/home/daniel/go/src/za/za_tests/test_struct_array_lib.h"
use +test_c

println "\nTest 1: Can we declare a variable with AUTO-imported type?"
var c color_t
println "Declared variable c of type color_t"
println "c =", c

println "\nTest 2: Can we instantiate AUTO-imported struct with typed syntax?"
c2 = color_t(.rgb [255, 128, 64], .alpha 200)
println "Created c2 =", c2

println "\nTest 3: What does a C function return?"
c3 = test_c::make_color(100, 150, 200, 255)
println "c3 from C function:", c3
println "Type info about c3.rgb:", c3.rgb
println "Type info about c3.rgb[0]:", c3.rgb[0]

println "\nDone"
