# Test BSD system resources after fixes
# This test verifies that sys_resources() returns meaningful values

println "Testing BSD system resources..."

# Test sys_resources()
println "Testing sys_resources():"
try
    resources = sys_resources()
    println "✓ sys_resources() returned:"
    println "  CPUCount: " + as_string(resources.CPUCount)
    println "  LoadAverage: " + as_string(resources.LoadAverage)
    println "  MemoryTotal: " + as_string(resources.MemoryTotal)
    println "  MemoryUsed: " + as_string(resources.MemoryUsed)
    println "  MemoryFree: " + as_string(resources.MemoryFree)
    println "  MemoryCached: " + as_string(resources.MemoryCached)
    println "  SwapTotal: " + as_string(resources.SwapTotal)
    println "  SwapUsed: " + as_string(resources.SwapUsed)
    println "  SwapFree: " + as_string(resources.SwapFree)
    println "  Uptime: " + as_string(resources.Uptime)

    # Check if values are reasonable
    if resources.CPUCount > 0
        println "  ✓ CPUCount is valid"
    else
        println "  ⚠ CPUCount is zero"
    endif

    if resources.MemoryTotal.as_int > 0
        println "  ✓ MemoryTotal is valid"
    else
        println "  ⚠ MemoryTotal is zero"
    endif
 
    if resources.Uptime > 0
        println "  ✓ Uptime is valid"
    else
        println "  ⚠ Uptime is zero"
    endif
    
catch err
    println "✗ sys_resources() failed: " + err
endtry

println "System resources test completed."


