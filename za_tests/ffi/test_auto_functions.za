println "[#4]═══ AUTO Function Signature Tests ═══[#-]\n"

# Test 1: Auto-discover function signatures from explicit header
println "[#3]Test 1: AUTO with explicit function header[#-]"
try
    module "libc.so.6" as testc auto "test_functions.h"
    use +testc

    # Test if functions are callable without explicit LIB declarations

    # Test strlen - should work automatically
    str = "Hello, World!"
    length = strlen(str)
    println "  ✓ strlen(\"{str}\") = {length} (expected 13)"

    # Test strcmp - compare two strings
    cmp = strcmp("hello", "hello")
    println "  ✓ strcmp(\"hello\", \"hello\") = {cmp} (expected 0)"

    # Test strcmp with different strings
    cmp2 = strcmp("hello", "world")
    on cmp2 != 0 do println "  ✓ strcmp(\"hello\", \"world\") = {cmp2} (expected non-zero)"

    # Test malloc and free
    ptr = malloc(100)
    if ptr != 0
        println "  ✓ malloc(100) returned valid pointer"
        free(ptr)
        println "  ✓ free() completed"
    endif

    println "\n[#2]Function auto-discovery tests completed[#-]"
catch e
    println "[#1]  ✗ Error occurred: [#-]\n",e.pp
endtry

println "\n[#2]═══════════════════════════════[#-]"
println "[#2]  AUTO Function Tests Done! [#-]"
println "[#2]═══════════════════════════════[#-]\n"

println "AUTO function signature parsing enabled!"
println "  • Automatically parses C function prototypes"
println "  • Auto-generates LIB declarations"
println "  • Eliminates need for manual function declarations"
println "  • Supports multiline declarations"
println "  • Skips static inline, typedef, and private functions"
println "  • Functions callable without explicit LIB statements"
