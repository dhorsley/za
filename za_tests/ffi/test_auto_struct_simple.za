#!/usr/bin/env za

# Simple test - just use structs from C functions, no instantiation

println "Testing AUTO struct import - simple version"

module "/home/daniel/go/src/za/za_tests/libtest_struct_array.so" as test_c auto "/home/daniel/go/src/za/za_tests/test_struct_array_lib.h"
use +test_c

println "\nTest 1: Declare variable with fully qualified type"
var c test_c::color_t
println "SUCCESS: Declared c:", c

println "\nTest 2: Get struct from C function"
c2 = test_c::make_color(255, 128, 64, 200)
println "c2.rgb[0]:", c2.rgb[0]
println "c2.rgb[1]:", c2.rgb[1]
println "c2.rgb[2]:", c2.rgb[2]
println "c2.alpha:", c2.alpha

println "\nTest 3: Pass struct to C function"
avg = test_c::get_avg_rgb(c2)
println "Average RGB:", avg

println "\nTest 4: data_block_t"
block = test_c::make_data_block(42, 10, 20, 30, 40, 50)
println "block.id:", block.id
println "block.values[0]:", block.values[0]
println "block.count:", block.count

sum = test_c::sum_data_block(block)
println "Sum:", sum

println "\nâœ“ All tests passed!"
