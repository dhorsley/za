// Debug script to check sysfs structure
println("Checking /sys/class/net structure...")

// Check if /sys/class/net exists
if can_read("/sys/class/net") {
    println("✓ /sys/class/net exists")
} else {
    println("✗ /sys/class/net does not exist")
    exit(1)
}

// List all entries in /sys/class/net
println("\nEntries in /sys/class/net:")
entries := dir("/sys/class/net")
for entry in entries {
    println("  ", entry)
}

// Check what files exist for each device
println("\nChecking files for each device:")
for device in entries {
    device_path := "/sys/class/net/" + device
    println("Device:", device)
    
    // List all files in the device directory
    device_files := dir(device_path)
    println("  Files:", device_files)
    
    // Check specific files we're trying to read
    files_to_check := ["operstate", "address", "type", "speed", "duplex"]
    for file in files_to_check {
        file_path := device_path + "/" + file
        if can_read(file_path) {
            content := read_file(file_path)
            println("  ✓ ", file, ":", content)
        } else {
            println("  ✗ ", file, " does not exist")
        }
    }
    println()
}

// Test the actual getNetworkDevices function
println("Testing getNetworkDevices function:")
devices := getNetworkDevices({})
println("Number of devices returned:", len(devices))

if len(devices) > 0 {
    println("First device info:")
    for key, value in devices[0] {
        println("  ", key, ":", value)
    }
} else {
    println("No devices returned!")
} 