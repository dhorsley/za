#!/usr/bin/za

#
# An obviously bad example of pi calculation.
# 

require 1.0.11

n=20
input n optarg 1

var i int
var k,acc,k2,tmp bigf = 0
var den,num bigf

den = 1
num = 1

var buf string

while i<n

    k += 1
    k2 = 1 + k*2f
    acc += num*2
    acc *= k2
    den *= k2
    num *= k

    on num > acc do continue

    tmp = 3 * num + acc
    d3 = bigi(tmp / den)
    tmp += num
    d4 = bigi(tmp / den)

    on d3 != d4 do continue

    buf=format("%v%v",buf,d3)
    i++
    on i % 10 == 0 do buf=format("%s\t:%v\n",buf,i)

    acc -= d3 * den
    acc *= 10
    num *= 10

endwhile

println buf

println format("Internal pi -> %.50f",pi())


