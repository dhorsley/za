#!/usr/bin/za

doc `
    screensaver-like pattern, vaguely resembles a common one.
`

h=term_h()
w=term_w()

delay=50
flipWeight  = 0.2f
dimWeight   = 0.2f
medWeight   = 0.8f

var colShow [w]bool

quit=false
cursoroff()
print "[#4][#dim]"
while not quit

    # recalc row zero
    row=""
    for c=0 to w-1 step 2

        # colour
        intensity=randf()
        when
        has intensity<dimWeight
            s_int="[#dim]"
        has intensity<medWeight
            s_int="[#boff]"
        or
            s_int="[#bold]"
        endwhen

        # shape
        on randf()<flipWeight do colShow[c]=not colShow[c]
        if colShow[c]
            row+=s_int+char(33+rand(94))+" "
        else
            row+="  "
        endif

    endfor

    # re-draw
    at 0,0,row+"[#CSI]1T"

    on keypress(delay)==32 do quit=true

endwhile
cursoron()


