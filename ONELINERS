
#
# these are not intended to be real examples of any value... i know you can do a 
# number of these in many other, probably simpler, ways. they are just examples
# of how to shove Za into a pipe.
#

# simple awk-like : find lines containing "Name" and display their line number and content.
za -r -e 'inc NR; on match(_line,"Name") do println format("%5d | %s",NR,_line)' <eg/test.json

# find and sort the number of open files per process:
lsof +c 0 | za -e 'foreach l in read_file("/dev/stdin"); fields(l); if !key("totals",F1); totals[F1]=0; endif; totals[F1]=totals[F1]+1; endfor; list=""; foreach t in totals; list=list+format("%v -> %v\n",t,key_t); endfor; print fieldsort(list,1,"n",true)' | more

# sort by human readable size
ls -lh | tr -s ' ' | tail -n+2 | za -e 'print fieldsort(read_file("/dev/stdin"),5,"h",false)'


